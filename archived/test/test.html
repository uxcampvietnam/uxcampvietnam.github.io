<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Matter.js Animate to Edge</title>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; background: #f5f5f5; }
  </style>
</head>
<body>

<script>
const { Engine, Render, World, Bodies, Body, Runner } = Matter;

// Create engine
const engine = Engine.create();
const world = engine.world;

const width = 800;
const height = 600;

// Create renderer
const render = Render.create({
  element: document.body,
  engine: engine,
  options: {
    width: width,
    height: height,
    wireframes: false,
    background: '#fff'
  }
});

Render.run(render);
Runner.run(Runner.create(), engine);

// Center
const centerX = width / 2;
const centerY = height / 2;

// Create N bodies at center with 1px size
const bodyCount = 10;
const bodies = [];
const targets = [];

for (let i = 0; i < bodyCount; i++) {
  const body = Bodies.rectangle(centerX, centerY, 1, 1, {
    isStatic: true,
    render: {
      fillStyle: `hsl(${Math.random() * 360}, 80%, 60%)`
    }
  });
  bodies.push(body);
  World.add(world, body);

  // Random edge position
  const edge = Math.floor(Math.random() * 4);
  let x, y;
  if (edge === 0) { x = Math.random() * width; y = 0; }         // top
  else if (edge === 1) { x = width; y = Math.random() * height; } // right
  else if (edge === 2) { x = Math.random() * width; y = height; } // bottom
  else { x = 0; y = Math.random() * height; }                    // left
  targets.push({ x, y });
}

// Animate
const duration = 1000; // in ms
const start = performance.now();

function animate() {
  const now = performance.now();
  const progress = Math.min((now - start) / duration, 1);

  bodies.forEach((body, i) => {
    const target = targets[i];
    const x = centerX + (target.x - centerX) * progress;
    const y = centerY + (target.y - centerY) * progress;
    Body.setPosition(body, { x, y });

    const scale = 1 + (100 - 1) * progress;
    const currentWidth = body.bounds.max.x - body.bounds.min.x;
    const scaleFactor = scale / currentWidth;

    Body.scale(body, scaleFactor, scaleFactor);
  });

  if (progress < 1) {
    requestAnimationFrame(animate);
  }
}

animate();
</script>
</body>
</html>
