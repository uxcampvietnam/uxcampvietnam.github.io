<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Danh sách bài viết</title>
</head>
<body>
<h1>Danh sách bài viết</h1>
<div id="blog-list"></div>

<script>
async function loadPosts() {
  // Tạm thời fix cứng danh sách file (có thể fetch từ API GitHub sau này)
  const postFiles = [
    "posts/first-post.md",
    "posts/another-post.md"
  ];

  const listEl = document.getElementById("blog-list");

  for (let file of postFiles) {
    const res = await fetch(file);
    const text = await res.text();

    // Lấy tiêu đề từ front matter
    const titleMatch = text.match(/title:\s*"(.*)"/);
    const title = titleMatch ? titleMatch[1] : file;

    const link = document.createElement("a");
    link.href = `post.html?file=${file}`;
    link.textContent = title;

    const div = document.createElement("div");
    div.appendChild(link);
    listEl.appendChild(div);
  }
}
loadPosts();
</script>
</body>
</html>